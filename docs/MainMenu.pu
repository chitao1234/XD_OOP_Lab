@startuml

start
:获取用户输入的选项;
switch (选项)
  case (1 - 登录)
    :提示输入用户名和密码;
    :使用用户仓储登录用户,检查是否为管理员;
    if (是管理员) then (是)
      :欢迎,管理员;
      :推入维护状态到状态栈;
    else (否)
      :尝试使用用户名和密码登录普通用户;
      if (登录成功) then (成功)
        :登录成功;
        :将登录的用户存入会话管理器;
        :推入已登录状态到状态栈;
      else (失败)
        :登录失败;
      endif
    endif
  case (2 - 注册)
    :提示输入用户名、密码和邮箱;
    :创建普通用户对象;
    :使用用户仓储注册用户;
    if (注册成功) then (成功)
      :注册成功;
    else (失败)
      :用户名已存在;
    endif
  case (3 - 查看商品)
    :获取产品仓储;
    :列出所有商品;
    :推入商品列表状态到状态栈;
  case (4 - 退出)
    :退出;
    :弹出状态栈顶状态;
  case (default)
    :无效选项,请重试;
endswitch

end

@enduml